<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hogwarts Quiz</title>

<style>
body{
  margin:0;min-height:100vh;font-family:Arial,sans-serif;
  background:url("default_bg.jpg") center/cover no-repeat;
  color:white;display:flex;justify-content:center;align-items:center;
}
#blackScreen{
  position:fixed;inset:0;background:black;opacity:0;
  pointer-events:none;transition:.5s;z-index:9999;
}
#blackScreen.active{opacity:1}
.box{
  background:rgba(0,0,0,.65);padding:25px;width:95%;
  max-width:420px;text-align:center;border-radius:16px;position:relative;
}
button{
  width:100%;padding:12px;margin-top:12px;font-size:16px;
  border:none;border-radius:10px;cursor:pointer;
}
input{
  width:90%;padding:10px;margin:8px 0;border-radius:8px;border:none;
}
.logo{width:160px;margin:16px auto}
.house-img{width:210px;margin-top:18px}
#errorText{color:#ff8080;display:none}
#footerID{
  position:absolute;bottom:10px;left:50%;
  transform:translateX(-50%);font-size:12px;opacity:.7;
}
#adminPanel{display:none}
#adminList{max-height:300px;overflow-y:auto;text-align:left;font-size:14px}

#langBtn{
  position:absolute;top:12px;right:12px;
  width:42px;height:42px;border-radius:50%;
  font-weight:bold;
}
</style>
</head>

<body>

<div id="blackScreen"></div>

<audio id="bgMusic" loop>
  <source src="harry_theme.aac" type="audio/aac">
</audio>
<audio id="houseMusic"></audio>

<div class="box">

<button id="langBtn" onclick="toggleLang()">ID</button>

<div id="intro">
  <div>
    <strong>! WELCOME !</strong><br>
    TO HOGWARTS SELECTION
  </div>
  <img src="logo.jpg" class="logo" id="logo">
  <button id="startBtn" onclick="startIntro()">CLICK MULAI</button>
</div>

<div id="user" style="display:none;">
  <h2 id="dataTitle">Masukkan Data</h2>
  <input id="username" placeholder="Username">
  <input id="userid" placeholder="ID">
  <p id="errorText">Isi dulu form</p>
  <button id="nextBtn" onclick="startQuiz()">Lanjut</button>
</div>

<div id="quiz" style="display:none;">
  <h3 id="question"></h3>
  <div id="answers"></div>
</div>

<div id="result" style="display:none;">
  <div id="finalText"></div>
  <img id="finalImg" class="house-img">
  <div id="finalUser"></div>
</div>

<div id="adminPanel">
  <h2>ADMIN PANEL</h2>
  <div id="adminList"></div>
</div>

<div id="footerID">ID : widgetw1</div>
</div>

<script>
const bgMusic=document.getElementById("bgMusic");
const houseMusic=document.getElementById("houseMusic");
const black=document.getElementById("blackScreen");
const logo=document.getElementById("logo");

const ADMIN_PASSWORD="kincit2501";
let logoTap=0,lang="id",index=0;
let usernameSaved="",userIdSaved="";

let score={gryffindor:0,slytherin:0,hufflepuff:0,ravenclaw:0};

const ui={
id:{start:"CLICK MULAI",data:"Masukkan Data",next:"Lanjut",error:"Isi dulu form",congrats:"!CONGRATS!<br>YOU IN "},
en:{start:"START",data:"Enter Data",next:"Continue",error:"Please fill the form",congrats:"!CONGRATS!<br>YOU IN "}
};

/* ===== SOAL 1–15 LENGKAP ===== */
const questions=[
{q:{id:"Saat menghadapi masalah, kamu biasanya…",en:"When facing problems, you usually…"},a:[
{t:{id:"Berpikir matang",en:"Think carefully"},h:"ravenclaw"},
{t:{id:"Langsung bertindak",en:"Act immediately"},h:"gryffindor"},
{t:{id:"Cari peluang",en:"Look for opportunities"},h:"slytherin"},
{t:{id:"Minta bantuan",en:"Ask for help"},h:"hufflepuff"}]},
{q:{id:"Kamu paling nyaman saat…",en:"You feel most comfortable when…"},a:[
{t:{id:"Bersama teman",en:"With friends"},h:"hufflepuff"},
{t:{id:"Belajar",en:"Studying"},h:"ravenclaw"},
{t:{id:"Ambil risiko",en:"Taking risks"},h:"gryffindor"},
{t:{id:"Merencanakan masa depan",en:"Planning the future"},h:"slytherin"}]},
{q:{id:"Orang lain mengenalmu sebagai…",en:"People know you as…"},a:[
{t:{id:"Ambisius",en:"Ambitious"},h:"slytherin"},
{t:{id:"Berani",en:"Brave"},h:"gryffindor"},
{t:{id:"Baik hati",en:"Kind"},h:"hufflepuff"},
{t:{id:"Cerdas",en:"Smart"},h:"ravenclaw"}]},
{q:{id:"Jika gagal, kamu akan…",en:"If you fail, you will…"},a:[
{t:{id:"Belajar dari kesalahan",en:"Learn from mistakes"},h:"ravenclaw"},
{t:{id:"Bangkit lagi",en:"Get back up"},h:"gryffindor"},
{t:{id:"Cari cara lain",en:"Find another way"},h:"slytherin"},
{t:{id:"Minta dukungan",en:"Seek support"},h:"hufflepuff"}]},
{q:{id:"Kamu lebih memilih…",en:"You prefer…"},a:[
{t:{id:"Pengetahuan",en:"Knowledge"},h:"ravenclaw"},
{t:{id:"Persahabatan",en:"Friendship"},h:"hufflepuff"},
{t:{id:"Kesuksesan",en:"Success"},h:"slytherin"},
{t:{id:"Petualangan",en:"Adventure"},h:"gryffindor"}]},
{q:{id:"Dalam kelompok kamu biasanya…",en:"In a group you are usually…"},a:[
{t:{id:"Pengatur strategi",en:"Strategist"},h:"slytherin"},
{t:{id:"Pemikir",en:"Thinker"},h:"ravenclaw"},
{t:{id:"Pemimpin",en:"Leader"},h:"gryffindor"},
{t:{id:"Penjaga kekompakan",en:"Team keeper"},h:"hufflepuff"}]},
{q:{id:"Hal yang paling kamu hargai…",en:"What you value most…"},a:[
{t:{id:"Kesetiaan",en:"Loyalty"},h:"hufflepuff"},
{t:{id:"Keberanian",en:"Bravery"},h:"gryffindor"},
{t:{id:"Kecerdasan",en:"Intelligence"},h:"ravenclaw"},
{t:{id:"Ambisi",en:"Ambition"},h:"slytherin"}]},
{q:{id:"Dalam tekanan kamu tetap…",en:"Under pressure you remain…"},a:[
{t:{id:"Tenang",en:"Calm"},h:"ravenclaw"},
{t:{id:"Fokus tujuan",en:"Goal-focused"},h:"slytherin"},
{t:{id:"Berani maju",en:"Bold"},h:"gryffindor"},
{t:{id:"Bersama tim",en:"With the team"},h:"hufflepuff"}]},
{q:{id:"Kamu dikenal sebagai orang yang…",en:"You are known as someone who…"},a:[
{t:{id:"Pekerja keras",en:"Hard worker"},h:"hufflepuff"},
{t:{id:"Berani ambil risiko",en:"Risk-taker"},h:"gryffindor"},
{t:{id:"Pintar",en:"Smart"},h:"ravenclaw"},
{t:{id:"Punya target jelas",en:"Goal-driven"},h:"slytherin"}]},
{q:{id:"Saat ada konflik kamu…",en:"When conflict happens you…"},a:[
{t:{id:"Menengahi",en:"Mediate"},h:"hufflepuff"},
{t:{id:"Mengatur langkah",en:"Plan moves"},h:"slytherin"},
{t:{id:"Menghadapi langsung",en:"Face it"},h:"gryffindor"},
{t:{id:"Mencari solusi",en:"Find solutions"},h:"ravenclaw"}]},
{q:{id:"Kamu paling bangga jika…",en:"You feel proud when…"},a:[
{t:{id:"Membantu orang",en:"Helping others"},h:"hufflepuff"},
{t:{id:"Menang",en:"Winning"},h:"gryffindor"},
{t:{id:"Mencapai target",en:"Achieving goals"},h:"slytherin"},
{t:{id:"Memahami hal sulit",en:"Understanding hard things"},h:"ravenclaw"}]},
{q:{id:"Kamu lebih memilih dikenal sebagai…",en:"You prefer to be known as…"},a:[
{t:{id:"Orang baik",en:"Kind person"},h:"hufflepuff"},
{t:{id:"Orang pintar",en:"Smart person"},h:"ravenclaw"},
{t:{id:"Orang sukses",en:"Successful person"},h:"slytherin"},
{t:{id:"Orang berani",en:"Brave person"},h:"gryffindor"}]},
{q:{id:"Jika ada tantangan baru kamu…",en:"When facing new challenges you…"},a:[
{t:{id:"Menganalisis dulu",en:"Analyze first"},h:"ravenclaw"},
{t:{id:"Langsung mencoba",en:"Try immediately"},h:"gryffindor"},
{t:{id:"Mengajak teman",en:"Invite friends"},h:"hufflepuff"},
{t:{id:"Melihat keuntungan",en:"Look for benefits"},h:"slytherin"}]},
{q:{id:"Kamu paling tidak suka…",en:"You dislike most…"},a:[
{t:{id:"Ketidakadilan",en:"Injustice"},h:"hufflepuff"},
{t:{id:"Kebodohan",en:"Ignorance"},h:"ravenclaw"},
{t:{id:"Rasa takut",en:"Fear"},h:"gryffindor"},
{t:{id:"Kegagalan",en:"Failure"},h:"slytherin"}]},
{q:{id:"Dalam hidup kamu lebih fokus pada…",en:"In life you focus more on…"},a:[
{t:{id:"Pengalaman",en:"Experience"},h:"gryffindor"},
{t:{id:"Pengetahuan",en:"Knowledge"},h:"ravenclaw"},
{t:{id:"Hubungan",en:"Relationships"},h:"hufflepuff"},
{t:{id:"Pencapaian",en:"Achievements"},h:"slytherin"}]}
];

function shuffle(a){return a.sort(()=>Math.random()-0.5);}
function transition(fn){
  black.classList.add("active");
  setTimeout(()=>{fn();black.classList.remove("active")},800);
}

function startIntro(){
  bgMusic.play();
  transition(()=>{intro.style.display="none";user.style.display="block";});
}

function startQuiz(){
  if(!username.value||!userid.value){errorText.style.display="block";return;}
  usernameSaved=username.value;
  userIdSaved=userid.value;
  errorText.style.display="none";
  transition(()=>{user.style.display="none";quiz.style.display="block";loadQuestion();});
}

function loadQuestion(){
  if(index>=questions.length){showResult();return;}
  const q=questions[index];
  question.innerText=q.q[lang];
  answers.innerHTML="";
  shuffle(q.a).forEach(ans=>{
    const b=document.createElement("button");
    b.innerText=ans.t[lang];
    b.onclick=()=>{score[ans.h]++;index++;transition(loadQuestion);}
    answers.appendChild(b);
  });
}

function showResult(){
  transition(()=>{
    const house=Object.keys(score).reduce((a,b)=>score[a]>score[b]?a:b);
    bgMusic.pause();
    houseMusic.src=house+".aac";
    houseMusic.play();

    const data=JSON.parse(localStorage.getItem("hogwartsPlayers")||"[]");
    data.push({user:usernameSaved,id:userIdSaved,house});
    localStorage.setItem("hogwartsPlayers",JSON.stringify(data));

    quiz.style.display="none";
    result.style.display="block";
    finalText.innerHTML=ui[lang].congrats+house.toUpperCase();
    finalImg.src=house+".jpg";
    finalUser.innerHTML="Username : "+usernameSaved+"<br>ID : "+userIdSaved;
  });
}

function toggleLang(){
  lang=lang==="id"?"en":"id";
  langBtn.innerText=lang.toUpperCase();
  startBtn.innerText=ui[lang].start;
  dataTitle.innerText=ui[lang].data;
  nextBtn.innerText=ui[lang].next;
  errorText.innerText=ui[lang].error;
  if(quiz.style.display==="block")loadQuestion();
}

logo.onclick=()=>{
  logoTap++;
  if(logoTap===2){
    logoTap=0;
    const pass=prompt("Masukkan sandi admin");
    if(pass===ADMIN_PASSWORD){
      intro.style.display="none";
      adminPanel.style.display="block";
      const data=JSON.parse(localStorage.getItem("hogwartsPlayers")||"[]");
      adminList.innerHTML=data.length
        ? data.map((p,i)=>`${i+1}. ${p.user} (${p.id}) - ${p.house}`).join("<br>")
        : "Belum ada peserta";
    }
  }
};
</script>

</body>
</html>